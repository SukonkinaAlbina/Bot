# Бот для поиска фильма по запросу пользователя.
## Принцип работы бота (Bot.py):
Доступные команды:
1. Найти фильм (/find_movie).
Отбор фильма осуществляется по следующим параметрам:
    * Жанр
    * Период выхода фильма
    * Рейтинг на сайте [__Кинопоиска__](https://www.kinopoisk.ru/)

Пользователь последовательно выбирает желаемые параметры.
Затем делается запрос к базе данных с фильмами. Полученная в результате таблица содержит только те записи, которые удовлетворяют условиям, заданным пользователем.
Из этих записей случайным образом выбирается лишь одна.
2. Случайный фильм (/random_movie)

Делается запрос к БД. Но результирующая таблица содержит уже все записи исходной БД.
Фильм выбирается с помощью генератора случайных чисел.

В результате пользователь получает сообщение, в котором указана вся информация о выбранном фильме (название, год, рейтинг, жанр, ссылка на [__Кинопоиск__](https://www.kinopoisk.ru/)).

# Формирование базы данных.
Чтобы сформировать БД, нужно:
1. Обработать с помощью Parse_years.py данные из таблицы ([movies.csv](https://github.com/SukonkinaAlbina/Bot/blob/master/%D0%98%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F%20%D0%BE%20%D1%84%D0%B8%D0%BB%D1%8C%D0%BC%D0%B0%D1%85/movies.csv)). Данная таблица была скачана с сайта [__MovieLens__](https://movielens.org/).
2. (_Опционально_) С помощью [Parse_years.py](https://github.com/SukonkinaAlbina/Bot/blob/master/Parse_years.py) можно получить фильмы за любой год с одного из российских сайтов с фильмами.
Мной были получены данные за 2010 и 2020 годы, в результате были сформированы файлы [films-2010_сырые](https://github.com/SukonkinaAlbina/Bot/blob/master/%D0%98%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F%20%D0%BE%20%D1%84%D0%B8%D0%BB%D1%8C%D0%BC%D0%B0%D1%85/films-2010_%D1%81%D1%8B%D1%80%D1%8B%D0%B5.txt) и [films-2020_сырые](https://github.com/SukonkinaAlbina/Bot/blob/master/%D0%98%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%86%D0%B8%D1%8F%20%D0%BE%20%D1%84%D0%B8%D0%BB%D1%8C%D0%BC%D0%B0%D1%85/films-2020_%D1%81%D1%8B%D1%80%D1%8B%D0%B5.txt).
3. Следует обработать все полученные данные с помощью [Parse_google.py](https://github.com/SukonkinaAlbina/Bot/blob/master/Parse_google.py).
4. Далее с помощью [DataBase.py](https://github.com/SukonkinaAlbina/Bot/blob/master/DataBase.py) необходимо создать БД 'Movies.db' и занести в неё подготовленные данные.
База данных будет содержать следующие столбцы: уникальный номер фильма, название фильма на английском, название фильма на русском, год, жанры, рейтинг, номер фильма на сайте [__Кинопоиска__](https://www.kinopoisk.ru/).


